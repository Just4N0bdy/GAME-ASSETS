import{t as Ye,B as G,aG as ze,d as q,o as v,c as h,_ as R,e as F,N as Ne,aH as Ee,aI as Me,a1 as Ke,$ as se,W as z,v as f,C as $,aJ as ge,aF as K,a4 as Je,aK as re,i as T,D as We,a as d,a8 as Qe,x as pe,ae as me,X as j,aL as ke,aM as xe,aN as Ze,s as et,aO as Se,aE as tt,F as U,j as X,m as P,h as je,U as H,aP as ne,w as ve,b as oe,ac as Le,aQ as Ae,k as Pe}from"./gameserver-1c2982e3.js";const at=/^(none|table(?!-c[ea]).+)/,we={position:"absolute",visibility:"hidden",display:"block"};function nt(s,t){return s.currentStyle?s.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(s)[t]:s.style[t]}function it(s){return(nt(s,"position")||"static")==="static"}function st(s){let t=s.offsetParent||document;for(;t&&t!==document&&it(t);)t=t.offsetParent;return t||document}class ot{width(t){return this.dimensions("clientWidth",t)}height(t){return this.dimensions("clientHeight",t)}outerWidth(t){return this.dimensions("offsetWidth",t)}outerHeight(t){return this.dimensions("offsetHeight",t)}position(t){const e=this.offset(t);let n={top:0,left:0};const a=st(t);a!==document&&(n=this.offset(a),n.top+=a.clientTop-a.scrollTop,n.left+=a.clientLeft-a.scrollLeft);const o=t.getBoundingClientRect();return{width:o.width||t.offsetWidth,height:o.height||t.offsetHeight,top:e.top-n.top,left:e.left-n.left}}offset(t){const e=t.getBoundingClientRect();return{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+(window.pageYOffset||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft)}}dimensions(t,e){let n;e===window.document?n=window.document.body:n=e;const a=window.getComputedStyle(n);let o=!1;const u={};if(at.test(a.display||"")&&n.offsetWidth===0){o=!0;for(const c in we)u[c]=n.style[c],n.style[c]=we[c]}let r=n[t];if(t==="clientWidth"?r-=parseFloat(a.paddingLeft||"")+parseFloat(a.paddingRight||""):t==="clientHeight"?r-=parseFloat(a.paddingTop||"")+parseFloat(a.paddingBottom||""):t==="offsetWidth"?r+=parseFloat(a.marginLeft||"")+parseFloat(a.marginRight||""):t==="offsetHeight"&&(r+=parseFloat(a.marginTop||"")+parseFloat(a.marginBottom||"")),o)for(const c in we)n.style[c]=u[c];return r}}const he=new ot;class lt{constructor(){this.stack=[],this.initialized=!1}register(t){this.stack.push(t),this.init()}deregister(t){Ye(this.stack,e=>e===t)}handle(t){if(t.key!=="Escape")return;const e=this.stack[this.stack.length-1];e&&e()}init(){this.initialized||(document.addEventListener("keydown",t=>this.handle(t)),this.initialized=!0)}}const De=new lt;class le{static bootstrap(){this._bootstrapped=!0,document.addEventListener("keydown",this.eventHandler.bind(this))}static register(t,e){this._bootstrapped||this.bootstrap(),this._handlers[t]?this._handlers[t].push(e):this._handlers[t]=[e]}static unregister(t,e){this._bootstrapped&&this._handlers[t]&&Ye(this._handlers[t],n=>n===e)}static eventHandler(t){if(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)return;const e=document.activeElement;if(e){const a=e.tagName.toLowerCase();if(a==="input"||a==="textarea"||a==="select"||e.hasAttribute("data-prevent-shortkey"))return}const n=this._handlers[t.key.toLowerCase()];if(n){for(const a of n)a(t);t.preventDefault()}}}le.enabled=!0;le._bootstrapped=!1;le._handlers={};function rt(s,t){let e=!1;G(()=>{le.register(s,t),e=!0}),ze(n);function n(){e&&(le.unregister(s,t),e=!1)}return{unregister:n}}const ut=q({__name:"AppShortkey",props:{shortkey:{type:String,required:!0}},emits:{press:s=>!0},setup(s,{emit:t}){const e=s,n=t;return rt(e.shortkey,a=>n("press",a)),(a,o)=>(v(),h("span"))}}),Te=R(ut,[["__file","AppShortkey.vue"]]);function ie(s){return typeof window.TouchEvent<"u"&&s instanceof TouchEvent}const ct=q({__name:"AppTouch",props:{panOptions:{required:!1,type:Object,default:{direction:"all",threshold:10}}},emits:{panstart:s=>!0,panmove:s=>!0,panend:s=>!0},setup(s,{emit:t}){const e=s,n=t,a=new Map([["touchmove",[l=>{L(l),S(l)},{capture:!0}]],["mousemove",[L,{passive:!0,capture:!0}]],["mouseup",[E,{passive:!0,capture:!0,once:!0}]],["touchend",[E,{passive:!0,capture:!0}]],["touchcancel",[E,{passive:!0,capture:!0}]],["contextmenu",[E,{passive:!0,capture:!0,once:!0}]],["dragstart",[l=>{Ie(l),E(l)},{passive:!1,capture:!0,once:!0}]]]);let o=!1,u=!1,r=null,c=null,i=null,p=null,g=!1,m=!1,k=!1;ze(()=>{_e()});const I=F(()=>e.panOptions.direction?e.panOptions.direction:"all"),b=F(()=>{const l=e.panOptions.threshold;return typeof l=="number"&&l>=0?l:10}),D=F(()=>{const l=I.value;return l==="all"||l==="horizontal"||l==="left"||l==="right"}),A=F(()=>{const l=I.value;return l==="all"||l==="vertical"||l==="up"||l==="down"});function C(l){if(u){l.preventDefault();return}if(!r){if(r=V(l),!p){p=a;for(const[y,[_,w]]of p)window.addEventListener(y,_,w)}if(b.value===0){o=!0;const y=B(l);Ce(O(l,y))}}}function L(l){if(u){l.preventDefault();return}k||(k=!0,window.requestAnimationFrame(()=>x(l)))}function x(l){if(k=!1,!r||ue(l).length>1)return;const y=B(l),{deltaX:_,deltaY:w,absDeltaX:M,absDeltaY:Y,timestamp:ye}=y,{x:N,y:W}=r;if(c={x:N+_,y:W+w,timestamp:ye},!o){const Q=b.value,ce=D.value,de=A.value,Z=M>Q,ee=Y>Q;o=ce&&Z||de&&ee;const te=!ce&&Z,ae=!de&&ee,fe=M>=Y,be=te&&fe||ae&&!fe;if(ie(l)&&be){Ie(l),m=!1,E(l,!0);return}}if(!o)return;const J=O(l,y);g||Ce(J),n("panmove",J)}function E(l,y=!1){if(!(ie(l)&&ue(l).length>1)){if(!g){_e();return}if(!m&&(o||y)){const _=B(l);Ue(O(l,_))}}}function S(l){if(o||u){l.preventDefault();return}const y=B(l),{absDeltaX:_,absDeltaY:w}=y;(_>w&&D.value||_<w&&A.value)&&l.preventDefault()}function V(l){let y=0,_=0;if(l instanceof MouseEvent)y=l.screenX,_=l.screenY;else if(ie(l)){const w=ue(l);if(!w.length)y=(r==null?void 0:r.x)||0,_=(r==null?void 0:r.y)||0;else{for(const M of w)y+=M.screenX,_+=M.screenY;y=Math.round(y/w.length),_=Math.round(_/w.length)}}return{x:y,y:_,timestamp:Date.now()}}function B(l){const{x:y,y:_,timestamp:w}=V(l),M=c?w-c.timestamp:0,{x:Y=y,y:ye=_}=r||{},N=y-Y,W=_-ye,J=Math.abs(N),Q=Math.abs(W),{movementX:ce=0,movementY:de=0,deltaX:Z=0,deltaY:ee=0}=i||{},te=Z!==N?N-Z:ce,ae=ee!==W?W-ee:de,fe=te===0?0:te/M,be=ae===0?0:ae/M,Ge=Math.sqrt(Math.pow(J,2)+Math.pow(Q,2));return i={deltaX:N,deltaY:W,distance:Ge,velocityX:fe,velocityY:be,absDeltaX:J,absDeltaY:Q,timestamp:w,movementX:te,movementY:ae,screenX:y,screenY:_},i}function O(l,y){let _=0,w=0;if(l instanceof MouseEvent)_=l.clientX,w=l.clientY;else if(ie(l)){const M=ue(l);for(const Y of M)_+=Y.clientX,w+=Y.clientY;_=Math.round(_/M.length),w=Math.round(w/M.length)}return{...y,preventDefault:()=>l.preventDefault(),target:l.target,center:{x:_,y:w},pointer:l}}function Ce(l){g||(n("panstart",l),g=!0,m=!1)}function Ue(l){m||(n("panend",l),m=!0,_e())}function Ie(l){u=!0,l.preventDefault()}function ue(l){if(!ie(l))return[];const y=[...l.touches,...l.changedTouches],_=[],w={};return y.forEach(M=>{w[M.identifier]||(_.push(M),w[M.identifier]=!0)}),_}function _e(){o=!1,r=null,c=null,i=null,g=!1,k=!1;for(const[l,[y,_]]of p||a)window.removeEventListener(l,y,_);p=null,u=!1}return(l,y)=>(v(),h("div",{onTouchmoveCapture:S,onMousedownCapture:C,onTouchstartCapture:C},[Ne(l.$slots,"default")],32))}}),dt=R(ct,[["__file","AppTouch.vue"]]);class Ve extends Ee{get img_thumbnail(){return this.media_item.mediaserver_url}set img_thumbnail(t){this.media_item.mediaserver_url=t}constructor(t={}){super(t),t.media_item&&(this.media_item=new Me(t.media_item))}getModelId(){return this.id}getMediaType(){return"image"}getMediaItem(){return this.media_item}getUrl(t){return t.getUrl()+`#screenshot-${this.id}`}}class ft extends Ee{get img_thumbnail(){return this.media_item.mediaserver_url}set img_thumbnail(t){this.media_item.mediaserver_url=t}constructor(t={}){super(t),t.media_item&&(this.media_item=new Me(t.media_item))}getModelId(){return this.id}getMediaType(){return"sketchfab"}getMediaItem(){return this.media_item}getUrl(t){return t.getUrl()+"#sketchfab-"+this.id}}class vt extends Ee{getModelId(){return this.id}getMediaType(){return"video"}getMediaItem(){}getUrl(t){return t.getUrl()+`#video-${this.id}`}}const $e=/\/(\d+)x(\d+)\//,pt=/\/(\d+)\//;function Be(s,t){const{dpiCheck:e="strict",step:n=100}=t;let a=s;if(se.isHiDpi){let u=n/2;e==="loose"&&(u+=n*.25),a>=u&&(a=a*2)}return a=Math.ceil(a/n)*n,a<n?n:a}function mt({src:s,maxWidth:t,maxHeight:e},n={}){if(!s||!s.startsWith(Ke.mediaserverUrl))return s;let a=s;const o=Be(t,n);if(a.search($e)!==-1){const u=Be(e,n);a=a.replace($e,`/${o}x${u}/`)}else a=a.replace(pt,`/${o}/`);return a}class ht{static loaded(t){return new Promise((e,n)=>{const a=window.document.createElement("img");a.onload=e,a.onerror=n,a.src=t})}static getResizedDimensions(t,e,n,a){const o=e/t;let u,r;if(n&&a)u=Math.min(t,n),r=u*o,r>a&&(r=a,u=r/o);else if(n&&!a)u=Math.min(t,n),r=u*o;else if(!n&&a)r=Math.min(e,a),u=r/o;else throw new Error("Invalid params.");return{width:u,height:r}}}const gt=["src","alt"],_t=q({__name:"AppImgResponsive",props:{src:{type:String,required:!0},alt:{type:String,default:""}},emits:{imgloadchange:s=>!0},setup(s,{emit:t}){const e=s,n=t,{src:a}=z(e),o=f(),u=f(!1),r=f("");$(a,c),ge(re,()=>c()),G(async()=>{await K(),c()});async function c(){var k;await Je(0);const i=(k=o.value)==null?void 0:k.parentElement;if(!i)return;const p=he.width(i),g=he.height(i);if(p<=0)return;const m=mt({src:a.value,maxWidth:p,maxHeight:g});(!u.value||m!==r.value)&&(r.value=m,u.value=!0,n("imgloadchange",!1),await ht.loaded(m),n("imgloadchange",!0))}return(i,p)=>(v(),h("img",{ref_key:"root",ref:o,class:"img-responsive",src:r.value,alt:s.alt},null,8,gt))}}),yt=R(_t,[["__file","AppImgResponsive.vue"]]),bt=q({__name:"AppMediaItemBackdrop",props:{mediaItem:{type:Object,default:void 0},radius:{type:String,default:void 0},fallbackColor:{type:String,default:""},colorOpacity:{type:Number,default:1}},setup(s){const t=s,{mediaItem:e,radius:n,fallbackColor:a}=z(t),o=F(()=>{if(n!=null&&n.value)return"-"+(n==null?void 0:n.value)}),u=F(()=>{var r;return!((r=e==null?void 0:e.value)!=null&&r.avg_img_color)||e!=null&&e.value.img_has_transparency?a.value?{backgroundColor:a.value}:void 0:{backgroundColor:"#"+e.value.avg_img_color}});return(r,c)=>(v(),h("div",{class:pe(["media-item-backdrop",o.value])},[T("div",{style:We({...u.value,...d(Qe)({inset:"1px",zIndex:-1}),width:"auto",borderRadius:"inherit",opacity:s.colorOpacity})},null,4),Ne(r.$slots,"default",{},void 0,!0)],2))}});const wt=R(bt,[["__scopeId","data-v-7118f6f7"],["__file","AppMediaItemBackdrop.vue"]]),kt=["width","height","src"],qe=.5625,xt=q({__name:"AppSketchfabEmbed",props:{sketchfabId:{type:String,required:!0},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},autoplay:{type:Boolean}},setup(s){const t=s,{sketchfabId:e,maxWidth:n,maxHeight:a,autoplay:o}=z(t),u=f(""),r=f(0),c=f(0),i=f();ge(re,()=>p()),G(()=>{p()}),$(e,()=>{if(!e.value)return;let g=`https://sketchfab.com/models/${e.value}/embed`;o.value&&(g+="?autostart=1"),u.value=g},{immediate:!0});async function p(){await K(),i.value&&(r.value=he.width(i.value),n.value&&(r.value=Math.min(n.value,r.value)),c.value=r.value*qe,a.value&&c.value>a.value&&(c.value=a.value,r.value=c.value/qe))}return(g,m)=>(v(),h("div",null,[T("div",{ref_key:"innerElem",ref:i},[T("iframe",{nwdisable:"",nwfaketop:"",frameborder:"0",allowvr:"",allowfullscreen:"",mozallowfullscreen:"",webkitallowfullscreen:"",width:r.value,height:c.value,src:u.value},null,8,kt)],512)]))}}),St=R(xt,[["__file","AppSketchfabEmbed.vue"]]),Et="https://s.gjcdn.net/assets/d8bee3bc.gif",Mt="https://s.gjcdn.net/assets/189a8aef.gif",Ct="https://s.gjcdn.net/assets/3e57d7f1.gif",It="https://s.gjcdn.net/assets/8160343e.gif",Lt="https://s.gjcdn.net/assets/655ad547.gif",At="https://s.gjcdn.net/assets/76929a36.gif",Pt="https://s.gjcdn.net/assets/692ba3e2.gif",Dt="https://s.gjcdn.net/assets/d29e630d.gif",Tt=["src","title"],Vt=q({__name:"AppLoading",props:{label:{type:String,default:()=>me("Loading...")},hideLabel:{type:Boolean},big:{type:Boolean},noColor:{type:Boolean},stationary:{type:Boolean},centered:{type:Boolean}},setup(s){const t=Object.assign({"./loading-2x.gif":Et,"./loading-bw-2x.gif":Mt,"./loading-bw.gif":Ct,"./loading-stationary-2x.gif":It,"./loading-stationary-bw-2x.gif":Lt,"./loading-stationary-bw.gif":At,"./loading-stationary.gif":Pt,"./loading.gif":Dt}),e=s,{stationary:n,noColor:a,big:o}=z(e),u=F(()=>{const r="loading"+(n.value?"-stationary":"")+(a.value?"-bw":"")+(o.value?"-2x":"");return t[`./${r}.gif`]});return(r,c)=>(v(),h("div",{class:pe(["loading",{"loading-big":d(o),"loading-stationary":d(n),"loading-bw":d(a),"loading-centered":s.centered}])},[T("img",{src:u.value,alt:"",title:d(me)("Loading...")},null,8,Tt),T("span",{class:pe(["loading-label",{"sr-only":s.hideLabel}])},j(s.label),3)],2))}});const $t=R(Vt,[["__scopeId","data-v-dcc76f93"],["__file","AppLoading.vue"]]);function Bt(s,t=null,e){const n=[];return s.mp4&&n.push({src:s.mp4,type:"video/mp4"}),s.webm&&n.push({src:s.webm,type:"video/webm"}),qt(n,t,e)}function qt(s,t,e){const n=f(s),a=f(0),o=f(!1),u=f(null),r=f(!0),c=f(0),i=f(null),p=f(0),g=f(!1),m=f(null),k=F(()=>!document.fullscreenEnabled);let I=0,b="paused";switch(t){case"feed":I=ke.get()?0:xe.get(),b=Ze.get()?"playing":"paused";break;case"page":I=ke.get()?0:xe.get(),b="playing";break;case"gif":I=0,b="playing";break;default:I=1,b="paused";break}const D=f(I),A=f(I===0),C=f(b),L=f(b);return et({sources:n,context:t,poster:e,muted:A,volume:D,duration:a,state:C,isScrubbing:o,stateBeforeScrubbing:u,isLoading:r,currentTime:c,queuedTimeChange:i,bufferedTo:p,isFullscreen:g,queuedFullScreenChange:m,queuedPlaybackChange:L,altControlsBehavior:k})}function Rt(s,t){if(s.context==="gif")return;const e=Math.min(1,Math.max(0,Math.round(t*100)/100));s.volume=e}function Xt(s){return s.context==="feed"||s.context==="page"?xe.get():s.context==="gif"?0:1}function Re(s,t,e){s.muted=t,Rt(s,t?0:(e==null?void 0:e.unmuteVolume)??Xt(s)),(s.context==="feed"||s.context==="page")&&ke.set(t)}function Xe(s,t,e,n){Se.trackEvent("video-player"+(s.context?`-${s.context}`:""),t,e,n)}const Ht={key:0,style:{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},Ft=["poster","autoplay","muted"],Ot=["type","src"],Yt=q({__name:"AppVideo",props:{player:{type:Object,required:!0},showLoading:{type:Boolean},shouldPlay:{type:Boolean,default:!0},initCallback:{type:Function,default:void 0},allowDegradedAutoplay:{type:Boolean}},setup(s){const t=s,{player:e,showLoading:n,shouldPlay:a,initCallback:o,allowDegradedAutoplay:u}=z(t),r=f(),c=f(!1);let i=null,p=0;G(()=>{if(i=document.createElement("video"),i.style.display="block",i.style.width="100%",i.poster=e.value.poster||"",i.loop=!0,i.autoplay=a.value,i.muted=e.value.muted||e.value.context==="gif",i.playsInline=!0,I(),e.value.context!=="page"){e.value.sources.forEach(({src:E,type:S})=>{const V=document.createElement("source");V.type=S,V.src=E,i.appendChild(V)});const x=()=>{c.value=!0,i.removeEventListener("play",x)};i.addEventListener("play",x)}r.value.appendChild(i),g()}),tt(()=>{if(k(),i){for(;i.firstChild;)i.removeChild(i.firstChild);i.load()}}),$(a,()=>{a.value?b():i.pause()}),$(()=>e.value.muted,D,{immediate:!0}),$(()=>e.value.volume,A,{immediate:!0}),$(()=>e.value.queuedPlaybackChange,C,{immediate:!0}),$(()=>e.value.queuedTimeChange,L,{immediate:!0});async function g(){o!=null&&o.value&&await o.value(i),await m(),c.value=!0}async function m(){A(),L(),await C()}function k(){if(!p||e.value.context==="gif")return;const x=Date.now()-p,E=Math.floor(x/e.value.duration);Xe(e.value,"watched","playtime",`${Math.ceil(x/1e3)}`),Xe(e.value,"watched","loops",`${E}`),p=0}function I(){i&&(i.addEventListener("play",()=>{e.value.state="playing",p=Date.now()}),i.addEventListener("pause",()=>{e.value.state="paused",k()}),i.addEventListener("volumechange",()=>{e.value.volume=i.volume,e.value.altControlsBehavior&&e.value.muted!=i.muted&&Re(e.value,i.muted)}),i.addEventListener("durationchange",()=>{i.duration&&(e.value.duration=i.duration*1e3)}),i.addEventListener("timeupdate",()=>e.value.currentTime=i.currentTime*1e3),i.addEventListener("progress",()=>{let x=0;for(let E=0;E<i.buffered.length;++E)x=Math.max(x,i.buffered.end(E)*1e3);e.value.bufferedTo=x}))}async function b(){if(!i)return;const x=e.value.volume;try{await i.play();return}catch{}if(!u.value){e.value.state="paused";return}x>0&&(e.value.volume=0,await K());try{await i.play();return}catch{}e.value.state="paused",e.value.volume=x}function D(){i&&e.value.muted!==i.muted&&(i.muted=e.value.muted)}function A(){i&&(e.value.volume>0&&Re(e.value,!1,{unmuteVolume:e.value.volume}),e.value.volume!==i.volume&&(i.volume=e.value.volume))}async function C(){!i||e.value.queuedPlaybackChange===null||(e.value.queuedPlaybackChange==="paused"&&!i.paused?i.pause():e.value.queuedPlaybackChange==="playing"&&i.paused&&await b(),e.value.queuedPlaybackChange=null,e.value.isLoading=!1)}function L(){if(!i||e.value.queuedTimeChange===null)return;const x=e.value.queuedTimeChange;e.value.currentTime=x,e.value.queuedTimeChange=null,i.currentTime=x/1e3}return(x,E)=>(v(),h("div",{ref_key:"root",ref:r,style:{position:"relative"}},[x.GJ_IS_SSR?(v(),h("video",{key:1,poster:d(e).poster,autoplay:d(a),muted:d(e).context==="gif",loop:"",playsinline:"",style:{display:"block",width:"100%",height:"auto"}},[(v(!0),h(U,null,je(d(e).sources,({src:S,type:V})=>(v(),h("source",{key:S,type:V,src:S},null,8,Ot))),128))],8,Ft)):(v(),h(U,{key:0},[!c.value&&d(n)?(v(),h("div",Ht,[X($t,{"hide-label":"","no-color":"",stationary:""})])):P("",!0)],64))],512))}}),zt=R(Yt,[["__file","AppVideo.vue"]]),Nt=["width","height","src"],Wt=["width","height","src"],He=.5625,jt=q({__name:"AppVideoEmbed",props:{videoProvider:{type:String,required:!0},videoId:{type:String,required:!0},maxVideoHeight:{type:Number,default:0},maxVideoWidth:{type:Number,default:0},autoplay:{type:Boolean}},setup(s){const t=s,{videoProvider:e,videoId:n,maxVideoHeight:a,maxVideoWidth:o,autoplay:u}=z(t),r=f(""),c=f("auto"),i=f("auto"),p=f();ge(re,()=>g()),G(()=>{g()}),$(n,()=>{if(!n.value)return;let m;const k=[];if(e.value==="youtube")m="https://www.youtube.com/embed/"+n.value,k.push("rel=0");else if(e.value==="vimeo")m="https://player.vimeo.com/video/"+n.value;else throw new Error("Invalid video provider.");u.value&&k.push("autoplay=1"),k.length>0&&(m+="?"+k.join("&")),r.value=m},{immediate:!0}),$(o,g),$(a,g);async function g(){await K(),p.value&&(c.value=he.width(p.value),o.value&&(c.value=Math.min(o.value,c.value)),i.value=c.value*He,a.value&&i.value>a.value&&(i.value=a.value,c.value=i.value/He))}return(m,k)=>(v(),h("div",null,[T("div",{ref_key:"innerElem",ref:p},[d(e)==="youtube"&&r.value?(v(),h("iframe",{key:0,style:{display:"block"},nwdisable:"",nwfaketop:"",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",width:c.value,height:i.value,src:r.value},null,8,Nt)):P("",!0),d(e)==="vimeo"&&r.value?(v(),h("iframe",{key:1,style:{display:"block"},nwdisable:"",nwfaketop:"",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:"",width:c.value,height:i.value,src:r.value},null,8,Wt)):P("",!0)],512)]))}}),Ut=R(jt,[["__file","AppVideoEmbed.vue"]]),Fe={controlsHeight:80,buttonSize:110},Gt=f(null);function Kt(){return Gt.value}const Jt={key:0,class:"-inner"},Qt={class:"-embed"},Zt=["src"],ea={key:0,class:"-embed"},ta=["textContent"],aa={key:0,class:"-embed"},na=q({__name:"AppLightboxItem",props:{item:{type:Object,required:!0},itemIndex:{type:Number,required:!0},activeIndex:{type:Number,required:!0}},setup(s){const t=s,{item:e,itemIndex:n,activeIndex:a}=z(t),o=f(!1),u=f(!1),r=f(!1),c=f(!1),i=f(0),p=f(0),g=f(),m=f(),k=H(()=>o.value),I=H(()=>b.value.is_animated&&!b.value.mediaserver_url_mp4&&!b.value.mediaserver_url_webm),b=H(()=>e.value.getMediaItem()),D=F(()=>{const L={mp4:b.value.mediaserver_url_mp4,webm:b.value.mediaserver_url_webm};return Bt(L,"gif",b.value.mediaserver_url)});ge(re,()=>A()),$(a,()=>C()),G(async()=>{await C(),await A(),c.value=!0});async function A(){if(await K(),!se.isXs&&(i.value=se.width-Fe.buttonSize*2,p.value=se.height-Fe.controlsHeight*2,g.value&&(p.value-=g.value.offsetHeight),e.value.getMediaType()==="image")){const L=e.value.getMediaItem().getDimensions(i.value,p.value);i.value=L.width,p.value=L.height}}async function C(){m.value&&(o.value=a.value===n.value,u.value=a.value+1===n.value,r.value=a.value-1===n.value,m.value.classList.remove("active","next","prev"),o.value?m.value.classList.add("active"):r.value?m.value.classList.add("prev"):u.value&&m.value.classList.add("next"),(o.value||u.value||r.value)&&A())}return(L,x)=>(v(),h("div",{ref_key:"rootElem",ref:m,class:"media-bar-lightbox-item"},[o.value||u.value||r.value?(v(),h("div",Jt,[d(ne)(d(e),d(Me))||d(ne)(d(e),d(Ve))?(v(),h(U,{key:0},[T("div",Qt,[X(wt,{"media-item":b.value,style:We({width:i.value?i.value+"px":void 0,height:p.value?p.value+"px":void 0,marginLeft:"auto",marginRight:"auto",maxWidth:`${b.value.width}px`}),radius:"lg"},{default:ve(()=>[!b.value.is_animated||!k.value?(v(),oe(yt,{key:0,class:"-img",src:d(e).img_thumbnail},null,8,["src"])):I.value?(v(),h("img",{key:1,class:"img-responsive",src:b.value.img_url,alt:""},null,8,Zt)):D.value?(v(),oe(zt,{key:2,class:"-video",player:D.value,"show-loading":""},null,8,["player"])):P("",!0)]),_:1},8,["media-item","style"])]),d(ne)(d(e),d(Ve))&&d(e).caption?(v(),h("div",{key:0,ref_key:"caption",ref:g,class:"-caption"},[T("h4",null,j(d(e).caption),1)],512)):P("",!0)],64)):d(ne)(d(e),d(vt))?(v(),h(U,{key:1},[o.value?(v(),h("div",ea,[c.value?(v(),oe(Ut,{key:0,"video-provider":d(e).type,"video-id":d(e).url,"max-video-width":i.value,"max-video-height":p.value,autoplay:""},null,8,["video-provider","video-id","max-video-width","max-video-height"])):P("",!0)])):P("",!0),d(e).title||d(e).description?(v(),h("div",{key:1,ref_key:"caption",ref:g,class:"-caption"},[T("h4",null,j(d(e).title),1),d(e).description?(v(),h("p",{key:0,textContent:j(d(e).description)},null,8,ta)):P("",!0)],512)):P("",!0)],64)):d(ne)(d(e),d(ft))?(v(),h(U,{key:2},[o.value?(v(),h("div",aa,[X(St,{"sketchfab-id":d(e).sketchfab_id,"max-width":i.value,"max-height":p.value,autoplay:!0},null,8,["sketchfab-id","max-width","max-height"])])):P("",!0)],64)):P("",!0)])):P("",!0)],512))}});const ia=R(na,[["__scopeId","data-v-31e35039"],["__file","AppLightboxItem.vue"]]),sa={class:"-inner"},oa={class:"-controls"},la={key:1,class:"-prev -hideable"},ra={key:3,class:"-next -hideable"},Oe="media-bar-lightbox-open",ua=q({__name:"AppLightboxPortal",setup(s){const t=f(null),e=f(null);let n=0;const a=f(!1),o=H(()=>Kt()),u=H(()=>o.value?o.value.items:[]),r=H(()=>o.value?o.value.index:0),c=H(()=>o.value?r.value<o.value.length-1:!1),i=H(()=>!o.value||!o.value.activeItem?null:o.value.activeItem.getMediaItem()),p=H(()=>!o.value||!o.value.activeItem?null:o.value.activeItem.getMediaType());let g=null,m=null;$(o,async()=>{var S;if(!o.value||!o.value.length){(S=o.value)==null||S.close(),I();return}k()},{deep:!0});async function k(){document.body.classList.add(Oe),g=re.subscribe(C),m=()=>A(),De.register(m),await K(),C()}function I(){document.body.classList.remove(Oe),g==null||g.close(),m&&(De.deregister(m),m=null),n=0,a.value=!1}function b(){o.value&&(o.value.goNext(),C())}function D(){o.value&&(o.value.goPrev(),C())}function A(){o.value&&o.value.close()}function C(){const S=-(se.width*r.value);e.value&&(e.value.style.transform=`translate3d( ${S}px, 0, 0 )`),n=S}function L(){a.value=!0}function x(S){a.value&&e.value&&(e.value.style.transform=`translate3d( ${n+S.deltaX}px, 0, 0 )`)}function E(S){a.value=!1;const{velocityX:V,deltaX:B,distance:O}=S;if(Math.abs(V)>.55&&O>10||Math.abs(B)>=t.value.clientWidth/3){V>0||B>0?(D(),Se.trackEvent("media-bar","swiped-prev")):(b(),Se.trackEvent("media-bar","swiped-next"));return}C()}return(S,V)=>o.value?(v(),h("div",{key:0,ref_key:"root",ref:t,class:pe({dragging:a.value})},[X(dt,{class:"media-bar-lightbox theme-dark","pan-options":{threshold:0},onPanstart:L,onPanmove:x,onPanend:E},{default:ve(()=>[X(Te,{shortkey:"arrowleft",onPress:D}),X(Te,{shortkey:"arrowright",onPress:b}),T("div",sa,[T("div",oa,[r.value>0?(v(),h("a",{key:0,class:"-prev",onClick:D},[X(Le,{icon:"chevron-left"})])):(v(),h("div",la)),T("div",null,[i.value&&p.value==="image"?(v(),oe(Ae,{key:0,icon:"download",trans:"",href:i.value.img_url,target:"_blank"},{default:ve(()=>[Pe(j(d(me)("Download")),1)]),_:1},8,["href"])):P("",!0),X(Ae,{onClick:A},{default:ve(()=>[Pe(j(d(me)("Close")),1)]),_:1})]),c.value?(v(),h("a",{key:2,class:"-next",onClick:b},[X(Le,{icon:"chevron-right"})])):(v(),h("div",ra))]),T("div",{ref_key:"slider",ref:e,class:"-slider"},[(v(!0),h(U,null,je(u.value,(B,O)=>(v(),oe(ia,{key:B.getModelId(),item:B,"item-index":O,"active-index":r.value},null,8,["item","item-index","active-index"]))),128))],512)])]),_:1})],2)):P("",!0)}});const da=R(ua,[["__scopeId","data-v-1705ce4a"],["__file","AppLightboxPortal.vue"]]);export{da as default};
